<!DOCTYPE html>
<html>
    <head>
        <style>
            html, body {
                padding: 0;
                margin: 0;
            }
        </style>
    </head>
    <body>
        
        <canvas id="viewport"></canvas>
        <script>
            /*
            (function() {
                var canvas = document.getElementById('viewport'),
                context = canvas.getContext('2d');
                var imageObj = new Image();

      imageObj.onload = function() {
        context.drawImage(imageObj, 120, 50);
      };
      imageObj.src = 'https://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';

                window.addEventListener('resize', make_base, false);

                function make_base() {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    base_image = new Image();
                    base_image.src = 'map.jpg';
                        base_image.onload = function() {
                        context.drawImage(base_image, 0, 0);
                    }
                 }
                make_base();
                
               
             })();*/
            var canvas = document.getElementById("viewport");
var ctx = canvas.getContext("2d");

var img1 = loadImage('map.jpg', main);
var img2 = loadImage('1.png', main);

var imagesLoaded = 0;
function main() {
    imagesLoaded += 1;

    if(imagesLoaded == 2) {
        // composite now
        ctx.drawImage(img1, 0, 0);
       
        ctx.drawImage(img2, 60, 60, 85, 100);
         ctx.scale(300,15);
    }
}

function loadImage(src, onload) {
    // http://www.thefutureoftheweb.com/blog/image-onload-isnt-being-called
    var img = new Image();
canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
    img.onload = onload;
    img.src = src;

    return img;
}
        </script>
    </body>
</html>